import { useQuery } from "@apollo/client"
import React from "react"
import { Link, useNavigate } from "react-router-dom"

import auth from "../../auth/auth-helper"
import { GET_AVATAR } from "../../gql/query"
import "./Header.css"

export default function Header() {
  const isLoggedIn = auth.isAuthenticated()
  const navigate = useNavigate()
  // const { pathname } = useLocation()

  const { data } = useQuery(GET_AVATAR)

  /*   const parsedpath = pathname.split('/')[1].trim()
  const title = parsedpath === '' ?  'Wriit' : parsedpath

  function firstChToUpperCase(str) {
     const splitStr =  str.split('')

     splitStr[0] = splitStr[0].toUpperCase()

     return splitStr.join('')
  }
 */
  return (
    <div className="header">
      <div>
        {" "}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          // xml:space="preserve"
          width="178px"
          height="93px"
          version="1.1"
          style={{
            shapeRendering: "geometricPrecision",
            textRendering: "geometricPrecision",
            imageRendering: "optimizeQuality",
            fillRule: "evenodd",
            clipRule: "evenodd",
          }}
          className="header-logo"
          viewBox="0 0 13.86 7.24"
          // xmlns:xlink="http://www.w3.org/1999/xlink"
        >
          <g id="Layer_x0020_1">
            <metadata id="CorelCorpID_0Corel-Layer" />
            <g id="_1032832984">
              <path
                className="fil0"
                d="M3.08 4.95c0.49,-0.2 0.81,-0.02 1,0 -0.08,-0.09 -0.19,-0.11 -0.27,-0.16 0.44,-0.12 1.32,-0.02 1.72,0.23 0.11,0.06 0.83,0.53 0.92,0.54 -0.17,-0.21 -0.68,-0.56 -0.91,-0.75l0.74 -0.02c0.86,0.01 1.29,0.2 1.98,0.87 -0.1,-0.29 -0.7,-0.62 -0.91,-0.86 0.64,0.02 1.16,0.15 1.65,0.57 -0.11,-0.19 -0.23,-0.26 -0.35,-0.4 0.32,-0.07 1.42,0.27 1.59,0.96 -0.54,0.16 -2.03,0.19 -2.55,0.18 -0.31,-0.01 -1.18,-0.08 -1.47,-0.14 -0.29,-0.07 -0.55,-0.09 -0.87,-0.17 -0.37,-0.1 -0.72,-0.2 -1.11,-0.36l0.54 0.25c0.19,0.07 0.38,0.12 0.56,0.19 0.45,0.15 0.8,0.22 1.28,0.29 0.06,0.01 0.08,0.01 0.15,0.02 0.27,0.06 0.74,0.07 0.87,0.09l0.59 0.02c0.82,-0.03 1.1,-0.01 1.95,-0.12 0.26,-0.03 0.54,-0.07 0.81,-0.13 0.27,-0.06 0.55,-0.11 0.82,-0.19 0.12,-0.03 0.1,-0.03 0.19,0.01 0.16,0.06 0.39,0.07 0.56,0.03 -0.03,0.11 -0.32,0.34 -0.44,0.36 -0.17,0.04 -1.27,0.13 -1.48,0.15 -0.37,0.03 -0.24,0.03 -0.42,0.21 -0.39,0.39 -1.39,0.59 -1.53,0.5 0.16,-0.11 0.39,-0.25 0.49,-0.37 -0.47,0.19 -1.69,0.67 -2.16,0.41l0.53 -0.26c-0.09,0.01 -0.36,0.1 -0.5,0.12 -0.4,0.07 -0.96,0.02 -1.31,-0.12 0.16,-0.06 0.38,-0.06 0.54,-0.2 -0.24,0.06 -0.98,0.03 -1.22,-0.07 0.19,-0.05 0.71,-0.07 0.88,-0.14 -0.07,-0.02 -0.55,0.04 -0.83,0.02 -0.79,-0.08 -1.66,-0.83 -2.03,-1.56z"
              />
              <path
                className="fil1"
                d="M1.45 4.39l-1.11 -3.72c-0.03,-0.09 -0.06,-0.16 -0.09,-0.2 -0.03,-0.05 -0.09,-0.09 -0.17,-0.13l-0.08 -0.03 0 -0.06 1.66 0 0 0.06 -0.14 0.05c-0.09,0.04 -0.16,0.09 -0.19,0.14 -0.03,0.05 -0.03,0.13 -0.01,0.22l0.69 2.6 0.73 -2.18 -0.14 -0.44c-0.03,-0.09 -0.06,-0.15 -0.08,-0.2 -0.03,-0.05 -0.07,-0.08 -0.13,-0.11l-0.13 -0.08 0 -0.06 1.56 0 0 0.06 -0.19 0.08c-0.08,0.03 -0.13,0.07 -0.14,0.13 -0.01,0.05 0,0.12 0.03,0.21l0.79 2.66 0.75 -2.61c0.03,-0.1 0.04,-0.19 0.03,-0.26 -0.01,-0.08 -0.06,-0.13 -0.15,-0.16l-0.14 -0.05 0 -0.06 0.87 0 0 0.06 -0.16 0.06c-0.08,0.03 -0.14,0.08 -0.18,0.14 -0.03,0.06 -0.06,0.14 -0.08,0.23l-1.04 3.65 -0.43 0 -0.94 -2.93 -0.96 2.93 -0.43 0z"
              />
              <path
                className="fil1"
                d="M5.54 4.37l0 -0.06 0.09 -0.02c0.09,-0.03 0.15,-0.07 0.18,-0.12 0.03,-0.05 0.04,-0.11 0.04,-0.19l0 -1.96c0,-0.09 -0.01,-0.16 -0.04,-0.2 -0.03,-0.04 -0.09,-0.07 -0.18,-0.09l-0.09 -0.02 0 -0.07 1.08 -0.36 0.06 0.06 0.05 0.54 0 0.05c0.06,-0.12 0.14,-0.22 0.23,-0.32 0.1,-0.1 0.2,-0.18 0.31,-0.24 0.12,-0.06 0.23,-0.1 0.34,-0.1 0.16,0 0.28,0.05 0.37,0.14 0.08,0.08 0.12,0.19 0.12,0.33 0,0.14 -0.04,0.25 -0.12,0.32 -0.08,0.08 -0.18,0.12 -0.29,0.12 -0.18,0 -0.33,-0.09 -0.46,-0.26l-0.01 -0.01c-0.05,-0.06 -0.09,-0.1 -0.15,-0.1 -0.05,-0.01 -0.1,0.02 -0.15,0.08 -0.04,0.03 -0.07,0.08 -0.1,0.13 -0.03,0.05 -0.05,0.11 -0.08,0.18l0 1.74c0,0.17 0.07,0.27 0.22,0.31l0.2 0.06 0 0.06 -1.62 0z"
              />
              <path
                className="fil1"
                d="M9.05 0.95c-0.15,0 -0.27,-0.05 -0.36,-0.13 -0.1,-0.09 -0.15,-0.21 -0.15,-0.35 0,-0.14 0.05,-0.25 0.15,-0.34 0.09,-0.09 0.21,-0.13 0.36,-0.13 0.14,0 0.26,0.04 0.35,0.13 0.1,0.09 0.15,0.2 0.15,0.34 0,0.14 -0.05,0.26 -0.15,0.35 -0.09,0.08 -0.21,0.13 -0.35,0.13zm-0.74 3.42l0 -0.06 0.09 -0.02c0.08,-0.03 0.14,-0.07 0.17,-0.12 0.03,-0.05 0.04,-0.11 0.04,-0.2l0 -1.95c0,-0.09 -0.01,-0.16 -0.04,-0.2 -0.03,-0.04 -0.09,-0.07 -0.17,-0.09l-0.09 -0.02 0 -0.06 1.14 -0.37 0.06 0.06 -0.01 0.89 0 1.75c0,0.08 0.01,0.15 0.04,0.2 0.03,0.05 0.09,0.09 0.17,0.11l0.06 0.02 0 0.06 -1.46 0z"
              />
              <path
                className="fil1"
                d="M10.79 4.7c-0.14,0 -0.26,0.04 -0.35,0.13 -0.1,0.09 -0.15,0.2 -0.15,0.34 0,0.14 0.05,0.26 0.15,0.35 0.09,0.08 0.21,0.13 0.35,0.13 0.15,0 0.26,-0.05 0.36,-0.13 0.1,-0.09 0.14,-0.21 0.14,-0.35 0,-0.14 -0.04,-0.25 -0.14,-0.34 -0.1,-0.09 -0.21,-0.13 -0.36,-0.13zm-0.73 -3.43l0 0.07 0.08 0.02c0.09,0.03 0.15,0.06 0.18,0.11 0.03,0.05 0.04,0.12 0.04,0.2l0 1.96c0,0.09 -0.01,0.15 -0.04,0.2 -0.03,0.04 -0.09,0.07 -0.18,0.09l-0.08 0.02 0 0.06 1.14 0.37 0.06 -0.07 -0.02 -0.88 0 -1.75c0,-0.09 0.02,-0.15 0.05,-0.2 0.03,-0.05 0.09,-0.09 0.17,-0.11l0.06 -0.02 0 -0.07 -1.46 0z"
              />
              <path
                className="fil1"
                d="M12.98 4.47c-0.27,0 -0.47,-0.07 -0.62,-0.2 -0.15,-0.14 -0.22,-0.35 -0.22,-0.64l0 -2.14 -0.43 0 0 -0.06 0.15 -0.02c0.13,-0.03 0.24,-0.08 0.33,-0.13 0.09,-0.05 0.19,-0.13 0.28,-0.22l0.51 -0.57 0.06 0 -0.02 0.88 0.7 0 0 0.12 -0.7 0 0 2.25c0,0.15 0.03,0.26 0.1,0.33 0.06,0.08 0.14,0.12 0.24,0.12 0.09,0 0.17,-0.03 0.23,-0.07 0.07,-0.04 0.14,-0.1 0.2,-0.18l0.07 0.06c-0.09,0.15 -0.2,0.26 -0.35,0.34 -0.14,0.08 -0.32,0.13 -0.53,0.13z"
              />
            </g>
          </g>
        </svg>
      </div>

      {isLoggedIn ? (
        <div className="user-actions">
{/*           <button
            onClick={() => {
              auth.clearJWT(() => {
                navigate("/signin")
              })
            }}
          >
            <i className="bx bx-log-out" /> Log Out{" "}
          </button> */}
          <Link to={`/profile/${data && data.me.username}`}>
            <img src={data && data.me.avatar} alt={data && data.me.username} />
          </Link>
        </div>
      ) : (
        <div className="user-actions">
          <Link to={"/signin"}>Sign In</Link>/
          <Link to={"/signup"}>Sign Up</Link>
        </div>
      )}
    </div>
  )
}
